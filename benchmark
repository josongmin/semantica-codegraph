#!/bin/bash
# 벤치마크 실행 래퍼 스크립트

cd "$(dirname "$0")"

# 기본 실행
if [ $# -eq 0 ]; then
    python3 apps/benchmarks/run.py
    exit $?
fi

# 인자 전달
case "$1" in
    quick|fast)
        echo "빠른 벤치마크 (5개 쿼리)"
        python3 apps/benchmarks/quickstart.py
        ;;
    eval|evaluate)
        echo "정확도 평가"
        python3 apps/benchmarks/run.py --evaluate
        ;;
    cody)
        echo "Cody 비교"
        python3 apps/benchmarks/run.py --with-cody
        ;;
    full)
        echo "전체 벤치마크"
        python3 -m apps.benchmarks.compare \
            --repo-id semantica-codegraph \
            --queries apps/benchmarks/datasets/semantica_queries.txt \
            --ground-truth apps/benchmarks/datasets/semantica_ground_truth.json \
            --k 5
        ;;
    help|--help|-h)
        echo "사용법: ./benchmark [명령]"
        echo ""
        echo "명령:"
        echo "  (없음)     대화형 벤치마크 (기본)"
        echo "  quick      빠른 벤치마크 (5개 쿼리)"
        echo "  eval       정확도 평가"
        echo "  cody       Cody와 비교"
        echo "  full       전체 벤치마크"
        echo "  help       이 도움말"
        ;;
    *)
        python3 apps/benchmarks/run.py "$@"
        ;;
esac
